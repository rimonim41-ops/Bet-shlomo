    // ===== Gallery =====
    const galleryGrid = document.getElementById("galleryGrid");
    const lb = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");
    const lbChip = document.getElementById("lbChip");
    const lbClose = document.getElementById("lbClose");
    const lbPrev = document.getElementById("lbPrev");
    const lbNext = document.getElementById("lbNext");

    let images = [];
    let currentIndex = 0;

    // Build gallery
    for (let i = 1; i <= GALLERY_MAX; i++) {
      const item = document.createElement("div");
      item.className = "gItem reveal";
      
      const img = document.createElement("img");
      img.src = `${i}.jpg`;
      img.alt = `תמונה ${i}`;
      img.loading = "lazy";
      
      const badge = document.createElement("div");
      badge.className = "gBadge";
      badge.textContent = `תמונה ${i}`;
      
      // Handle load error - hide if image doesn't exist
      img.onerror = () => {
        item.style.display = "none";
      };
      
      // Handle successful load
      img.onload = () => {
        images.push({ src: `${i}.jpg`, index: i });
        item.addEventListener("click", () => openLightbox(i - 1));
        io.observe(item);
      };
      
      item.appendChild(img);
      item.appendChild(badge);
      galleryGrid.appendChild(item);
    }

    function openLightbox(index) {
      if (images.length === 0) return;
      currentIndex = index;
      updateLightbox();
      lb.classList.add("is-open");
      lb.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
    }

    function closeLightbox() {
      lb.classList.remove("is-open");
      lb.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    function updateLightbox() {
      if (images[currentIndex]) {
        lbImg.src = images[currentIndex].src;
        lbChip.textContent = `תמונה ${images[currentIndex].index} מתוך ${images.length}`;
      }
    }

    function nextImage() {
      currentIndex = (currentIndex + 1) % images.length;
      updateLightbox();
    }

    function prevImage() {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      updateLightbox();
    }

    // Event listeners
    lbClose.addEventListener("click", closeLightbox);
    lbNext.addEventListener("click", nextImage);
    lbPrev.addEventListener("click", prevImage);
    
    lb.addEventListener("click", (e) => {
      if (e.target === lb) closeLightbox();
    });

    // Keyboard navigation
    document.addEventListener("keydown", (e) => {
      if (!lb.classList.contains("is-open")) return;
      
      if (e.key === "Escape") closeLightbox();
      if (e.key === "ArrowRight") prevImage(); // RTL
      if (e.key === "ArrowLeft") nextImage();  // RTL
    });
